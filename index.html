<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atelier - Ecosistema de Moda Digital</title>
    <link rel="stylesheet" href="style.css"> 
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js"></script>
    </head>
<body>
    <div id="auth-gatekeeper" class="auth-overlay">
    <div class="auth-modal">

        <div id="view-initial" class="auth-view-container">
            <div class="auth-column login-column">
                <h2 class="auth-title">ENTRA EN TU CUENTA</h2>
                <form id="login-form">
                    <div class="input-group">
                        <input type="email" placeholder="CORREO ELECTR√ìNICO" required>
                    </div>
                    <div class="input-group">
                        <input type="password" placeholder="CONTRASE√ëA" required>
                        <span class="eye-icon">üëÅÔ∏è</span>
                    </div>
                    <button type="submit" class="btn-main">INICIAR SESI√ìN</button>
                </form>
                <a href="#" class="forgot-pass">¬øOLVIDASTE TU CONTRASE√ëA?</a>
            </div>

            <div class="auth-divider"></div>

            <div class="auth-column register-invite-column">
                <h2 class="auth-title">¬øNO TIENES CUENTA?</h2>
                <p class="auth-subtitle">REG√çSTRATE Y HAZ TUS COMPRAS M√ÅS R√ÅPIDO EN EL ECOSISTEMA ATELIER.</p>
                <button id="btn-switch-to-register" class="btn-secondary">CREAR CUENTA</button>
            </div>
        </div>


        <div id="view-register-full" class="auth-view-container" style="display: none;">
            <div class="full-register-column">
                <h2 class="auth-title">CREA TU CUENTA</h2>
                <p class="auth-subtitle">INGRESA TUS DATOS PARA SER PARTE DE ATELIER.</p>
                
                <form id="register-form-full">
                    <div class="form-grid-2">
                        <div class="input-group">
                            <input type="text" placeholder="NOMBRE *" required>
                        </div>
                        <div class="input-group">
                            <input type="text" placeholder="APELLIDOS *" required>
                        </div>
                    </div>

                    <div class="form-grid-2">
                        <div class="input-group">
                            <input type="email" placeholder="CORREO ELECTR√ìNICO *" required>
                        </div>
                        <div class="input-group dropdown-group">
                            <select required>
                                <option value="" disabled selected>G√âNERO *</option>
                                <option value="m">Masculino</option>
                                <option value="f">Femenino</option>
                                <option value="o">Otro</option>
                            </select>
                            <span class="dropdown-arrow">‚ñº</span>
                        </div>
                    </div>

                    <div class="form-grid-2">
                        <div class="input-group">
                            <input type="password" placeholder="CONTRASE√ëA *" required>
                            <span class="eye-icon">üëÅÔ∏è</span>
                        </div>
                        <div class="input-group">
                            <input type="password" placeholder="REPETIR CONTRASE√ëA *" required>
                            <span class="eye-icon">üëÅÔ∏è</span>
                        </div>
                    </div>

                    <ul class="password-requirements">
                        <li>Combina may√∫sculas con min√∫sculas.</li>
                        <li>Ingresa de 8 a 20 caracteres.</li>
                        <li>Agrega por lo menos un n√∫mero o s√≠mbolo.</li>
                    </ul>

                    <div class="checkbox-group">
                        <input type="checkbox" id="newsletter-check">
                        <label for="newsletter-check">Quiero suscribirme a la newsletter</label>
                    </div>
                    <p class="legal-text">Al presionar "Crear cuenta" acepto el <a href="#">Aviso de Privacidad</a> y <a href="#">Cookies</a>.</p>

                    <button type="submit" class="btn-main">CREAR CUENTA</button>
                </form>

                <a href="#" id="link-back-to-login" class="forgot-pass back-link">¬øYA TIENES UNA CUENTA? INICIA SESI√ìN</a>
            </div>
        </div>

    </div>
</div>
    <header class="main-header">
        <div class="logo">
        <a href="index.html"> <img src="./logo-atelier.png" alt="Logo Atelier" class="logo-img">
    </a>
        </div>
        <nav class="main-nav">
            <ul>
                <li><a href="#" class="nav-link active">Inicio</a></li>
                <li><a href="test-estilo.html" class="nav-link">Encuentra tu Estilo</a></li>
                <li><a href="dise√±a-estilo.html" class="nav-link">Dise√±a tu Estilo</a></li>
                <li><a href="crea-avatar.html" class="nav-link">Crea tu Avatar</a></li>
                <li><a href="comunidad.html" class="nav-link">Comunidad</a></li>
            </ul>
        </nav>
        <div class="user-logged-menu">
    <span class="user-greeting">HOLA, CRIS</span>
    <div class="user-avatar-icon">
        <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
    </div>
    <button id="btn-logout" class="logout-link">SALIR</button>
</div>
        </div>
    </header>

    <main>
    <section class="hero-section">
        <div class="hero-content">
            <h1 class="hero-title">
                TU ESTILO, TU MEDIDA,<br>
                <span class="highlight-text">TU VERSI√ìN DIGITAL.</span>
            </h1>
            <p class="hero-description">
                Explora un espacio de moda donde la inteligencia artificial y la 
                personalizaci√≥n 3D se combinan para crear tu identidad de estilo.
            </p>
            
            <div class="hero-buttons">
                <a href="crea-avatar.html" class="btn-primary">CREAR NUEVO AVATAR</a>
                <a href="test-estilo.html" class="btn-secondary">DESCUBRE TU ESTILO</a>
            </div>
        </div>

        <div class="hero-avatar">
            <model-viewer 
                id="home-avatar"
                src="https://models.readyplayer.me/64b7a7f4e9a03c3963456789.glb" 
                alt="Tu Avatar Atelier"
                camera-controls
                disable-zoom
                auto-rotate
                shadow-intensity="1"
                environment-image="neutral"
                exposure="1"
                camera-orbit="0deg 75deg 3m"
                field-of-view="25deg"
                interaction-prompt="none">
            </model-viewer>
            
            <div class="avatar-bg-glow"></div>
        </div>
    </section>
</main>

    <footer class="main-footer">
        <div class="footer-content">
            <nav class="footer-nav">
                <ul>
                    <li><a href="#">Sobre Nosotros</a></li>
                    <li><a href="#">Contacto</a></li>
                    <li><a href="#">Pol√≠tica de Privacidad</a></li>
                </ul>
            </nav>
            <div class="social-media">
                <a href="#"><img src="instagram-white.svg" alt="Instagram"></a>
                <a href="#"><img src="facebook-white.svg" alt="Facebook"></a>
            </div>
        </div>
    </footer>
<script>
    const iframe = document.getElementById('frame');
    const viewer = document.getElementById('avatar-viewer');

    function subscribe(event) {
        const json = parse(event);
        if (json?.source !== 'readyplayerme') {
            return;
        }

        // Suscribirse para escuchar cuando el avatar est√© listo
        if (json.eventName === 'v1.frame.ready') {
            iframe.contentWindow.postMessage(
                JSON.stringify({
                    target: 'readyplayerme',
                    type: 'subscribe',
                    eventName: 'v1.avatar.exported'
                }),
                '*'
            );
        }

        // Cuando el usuario termina el avatar
        if (json.eventName === 'v1.avatar.exported') {
            const avatarUrl = json.data.url;
            console.log("Avatar Creado:", avatarUrl);

            // Ocultamos el editor y mostramos el resultado 3D
            iframe.hidden = true;
            viewer.hidden = false;
            viewer.src = avatarUrl;
        }
    }

    function parse(event) {
        try {
            return JSON.parse(event.data);
        } catch (error) {
            return null;
        }
    }

    window.addEventListener('message', subscribe);
    document.addEventListener('message', subscribe);
</script>
<script>document.addEventListener('DOMContentLoaded', () => {
    // --- Elementos Principales ---
    const authOverlay = document.getElementById('auth-gatekeeper');
    const viewInitial = document.getElementById('view-initial');
    const viewRegisterFull = document.getElementById('view-register-full');

    // --- Botones y Forms ---
    const btnSwitchToRegister = document.getElementById('btn-switch-to-register');
    const linkBackToLogin = document.getElementById('link-back-to-login');
    const loginForm = document.getElementById('login-form');
    const registerFormFull = document.getElementById('register-form-full');
    const btnLogout = document.getElementById('btn-logout'); // El bot√≥n de salir del header

    // =========================================================
    // 1. COMPROBACI√ìN DE SESI√ìN AL CARGAR (La Memoria)
    // =========================================================
    function checkSession() {
        // Preguntamos al navegador si hay una sesi√≥n guardada
        const isLoggedIn = localStorage.getItem('atelierUserSession');

        if (isLoggedIn === 'true') {
            // Si ya est√° logueado, ocultamos el muro INMEDIATAMENTE
            authOverlay.style.display = 'none';
            console.log("Sesi√≥n activa detectada. Bienvenido de nuevo.");
        } else {
            // Si no, aseguramos que se vea
            authOverlay.style.display = 'flex';
        }
    }

    // Ejecutamos la comprobaci√≥n apenas carga la p√°gina
    checkSession();


    // =========================================================
    // 2. L√ìGICA DE INTERFAZ (Cambio de Vistas)
    // =========================================================
    
    // Ir de Inicio -> Registro
    if(btnSwitchToRegister) {
        btnSwitchToRegister.addEventListener('click', () => {
            viewInitial.style.display = 'none';
            viewRegisterFull.style.display = 'block';
            document.querySelector('.auth-modal').scrollTop = 0;
        });
    }

    // Volver de Registro -> Inicio
    if(linkBackToLogin) {
        linkBackToLogin.addEventListener('click', (e) => {
            e.preventDefault();
            viewRegisterFull.style.display = 'none';
            viewInitial.style.display = 'flex';
        });
    }


    // =========================================================
    // 3. L√ìGICA DE LOGIN / REGISTRO (Guardar Sesi√≥n)
    // =========================================================

    function enterAtelierSuccess(message) {
        console.log(message);
        
        // A) GUARDAMOS LA SESI√ìN EN EL NAVEGADOR
        localStorage.setItem('atelierUserSession', 'true');

        // B) Quitamos el muro con animaci√≥n
        authOverlay.style.transition = "opacity 0.6s ease";
        authOverlay.style.opacity = "0";
        
        setTimeout(() => {
            authOverlay.style.display = "none";
        }, 600);
    }

    // Simular Submit Login
    if(loginForm) {
        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            enterAtelierSuccess("Usuario logueado correctamente.");
        });
    }

    // Simular Submit Registro
    if(registerFormFull) {
        registerFormFull.addEventListener('submit', (e) => {
            e.preventDefault();
            enterAtelierSuccess("Cuenta creada. Iniciando sesi√≥n...");
        });
    }


    // =========================================================
    // 4. L√ìGICA DE CERRAR SESI√ìN (Bot√≥n Salir)
    // =========================================================
    
    if (btnLogout) {
        btnLogout.addEventListener('click', (e) => {
            e.preventDefault(); 

            // A) BORRAMOS LA SESI√ìN DE LA MEMORIA
            localStorage.removeItem('atelierUserSession');
            console.log("Sesi√≥n cerrada.");

            // B) Volvemos a mostrar el Muro de Autenticaci√≥n
            viewRegisterFull.style.display = 'none';
            viewInitial.style.display = 'flex'; // Regresamos a la vista inicial

            authOverlay.style.display = "flex";
            
            // Truco para la animaci√≥n de entrada
            setTimeout(() => {
                authOverlay.style.opacity = "1";
            }, 10);
        });
    }
});</script>
<script>// ... tu c√≥digo anterior ...

    // L√≥gica para Cerrar Sesi√≥n
    const btnLogout = document.getElementById('btn-logout');
    
    if(btnLogout){
        btnLogout.addEventListener('click', () => {
            // Muestra de nuevo el overlay
            const authOverlay = document.getElementById('auth-gatekeeper');
            authOverlay.style.display = "flex";
            
            // Peque√±o truco para reiniciar la animaci√≥n de opacidad
            setTimeout(() => {
                authOverlay.style.opacity = "1";
            }, 10);
            
            console.log("Sesi√≥n cerrada");
        });
    }</script>
</body>
</html>